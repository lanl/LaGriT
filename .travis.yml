language: c
sudo: required

os:
  - linux
  - osx
  - windows

compiler:
  - gcc

matrix:
  allow_failures:
    - os: windows

branches:
  only:
    - master

before_install:
  - if [ $TRAVIS_OS_NAME = windows ]; then choco install make cmake; fi
  - if [ $TRAVIS_OS_NAME = linux ];   then sudo apt-get -y install gfortran libz-dev seacas-bin m4 bison; fi
  - if [ $TRAVIS_OS_NAME = osx ];     then brew install gcc; fi
  - export FC=$(which gfortran);      echo $FC
  - export CC=$(which gcc);           echo $CC
  - export CXX=$(which g++);          echo $CXX
  
script:
  - make exodus  CC=$CC FC=$FC CXX=$CXX
  - make release CC=$CC FC=$FC CXX=$CXX
  - make static  CC=$CC FC=$FC CXX=$CXX
  - make test

after_success:
  - echo LaGriT successfully compiled
