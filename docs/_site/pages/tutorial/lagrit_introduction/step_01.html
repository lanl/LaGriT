<html lang="en-gb" dir="ltr">

<head>
    <title>Tutorial LaGriT Introduction Step 01</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="LaGriT : LaGriT is a library providing mesh generation and optimization for a variety of polyhedra and dimensions.">
    <link href="https://fonts.googleapis.com/css?family=Do+Hyeon|Fira+Sans" rel="stylesheet">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Reg-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Light-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" href="/assets/css/uikit_theme.css">
    <link rel="icon" type="image/x-icon" href="https://www.lanl.gov/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/assets/css/footer.css">

    <!-- load stylesheets -->
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.2.0/he.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.2/marked.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.2/vue-router.min.js" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit-icons.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/highlightjs/highlight.min.js" defer=""></script>
    <script src="https://getuikit.com/app/main.min.js?1180" defer=""></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-42150424-1" async=""></script>

    <!-- tipuesearch files -->
    <link rel="stylesheet" href="/assets/tipuesearch/css/normalize.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="/assets/tipuesearch/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">
    <script src="/assets/tipuesearch/tipuesearch_set.js"></script>
    <script src="/assets/tipuesearch/tipuesearch.min.js"></script>

    <!-- Finally, load global style to overwrite template, tipuesearch, etc. -->
    <!--<link rel="stylesheet" href="/assets/globalstyle.css">-->
</head>

<body>
    <div>
        <!-- Header -->
        <div uk-sticky="media: 960" class="uk-navbar-container tm-navbar-container uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 100%; color: #212328;">
            <div class="uk-container uk-container-expand">
                <nav class="uk-navbar">
                    <div class="uk-navbar-left">
                        <a href="/" class="uk-navbar-item uk-logo" style="font-family: 'Do Hyeon', sans-serif; color: white;">
                            <img uk-img src="/assets/img/logo.png" width="50" class="uk-margin-small-right" alt="LANL logo">
                            LaGriT
                        </a>
                    </div>
                    <div class="uk-navbar-right">
                        <ul class="uk-navbar-nav uk-visible@m">
                            <li><a href="/pages/commands">Commands</a></li>
                            <li><a href="/pages/tutorial/index">Tutorials</a></li>
                            <li><a href="/pages/release">Release Notes</a></li>
                            <li><a href="/pages/publications">Publications</a></li>
                            <li><a href="http://github.com/lanl/LaGriT"><span uk-icon="github"></span></a></li>

                            <!-- Begin search bar -->
                            <div class="nav-overlay uk-navbar-right">
                                <a class="uk-navbar-toggle" uk-search-icon uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <div class="nav-overlay uk-navbar-left uk-flex-1" hidden>
                                <div class="uk-navbar-item uk-width-expand">
                                    <form class="uk-search uk-search-navbar uk-width-1-1" action="https://lanl.github.io/LaGriT/search/">
                                        <input class="uk-search-input" name="q" type="search" id="tipue_search_input" placeholder="Search..." autofocus>
                                    </form>
                                </div>
                                <a class="uk-navbar-toggle" uk-close uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <script>
                                $(document).ready(function() {
                                  $('#tipue_search_input').tipuesearch({
                                        'show': 10,
                                        'newWindow'  : true,
                                        'showURL' : true,
                                        'showTitleCount' : true,
                                        'descriptiveWords' : 20,
                                        'highlightTerms' : true,
                                        'mode': 'static',
                                  });
                                });
                            </script>
                            <!-- End search bar -->

                        </ul>
                        
                        <a uk-navbar-toggle-icon="" href="#offcanvas" uk-toggle="" class="uk-navbar-toggle uk-hidden@m uk-icon uk-navbar-toggle-icon">
                            <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="navbar-toggle-icon">
                                <rect y="9" width="20" height="2"></rect>
                                <rect y="3" width="20" height="2"></rect>
                                <rect y="15" width="20" height="2"></rect>
                            </svg>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
        <div class="uk-sticky-placeholder" style="height: 80px; margin: 0px;"></div>
        <!-- End Header -->

        <!-- Main Body text -->
        <div class="tm-main uk-section uk-section-default">
            <div class="uk-container uk-container-small uk-position-relative">

                <h1 id="step-1-build-a-hex-mesh">Step 1. Build a Hex Mesh</h1>

<!-- Begin image -->
<p><a href="step_01/01_hex_mesh.png"> <img width="500" src="step_01/01_hex_mesh.png" /> </a></p>
<p><br />
<!-- End image --></p>

<h4 id="lagrit-command-file-01_create_hexlgi">LaGriT command file: <a href="/pages/tutorial/lagrit_introduction/step_01/01_create_hex.lgi.txt">01_create_hex.lgi</a></h4>
<h4 id="lagrit---output-file-lagritout">LaGriT   output file: <a href="/pages/tutorial/lagrit_introduction/step_01/01_create_hex.out.txt">lagrit.out</a></h4>
<h4 id="lagrit-all-run-files-folder-step_01">LaGriT all run files: <a href="https://github.com/lanl/LaGriT/tree/master/docs/pages/tutorial/lagrit_introduction/step_01">Folder step_01</a></h4>

<h2 id="create-a-mesh-object">Create a Mesh Object</h2>

<p>A mesh object can be created by reading a mesh, ie <code class="language-plaintext highlighter-rouge">read/avs/mesh.inp/ 3dmesh</code>
or the mesh can be created. For this example, we will start with one of the <a href="/pages/docs/commands/createpts.html"><code class="language-plaintext highlighter-rouge">createpts</code></a> commands. These are used to add points to a mesh object with defined distributions.</p>

<p>For your first command you will create a 3D mesh object and name it <code class="language-plaintext highlighter-rouge">3dmesh</code>. This will be a structured hex mesh, so we add the element type to the end of the command syntax.</p>

<p>See more on the Mesh Object data structure at <a href="https://lanl.github.io/LaGriT/pages/docs/meshobject.html">LaGriT Mesh Object</a></p>

<p><em>Note on spacing: the slashes separate keywords. The slashes with empty spaces are place holders if the user wants to define npoints or nelements in the command. We do not define these here since these values will be updated in the mesh object as points are created.</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmo / create / 3dmesh / / / hex
</code></pre></div></div>

<p>View the contents of this empty mesh object. Note the mesh attributes nnodes and nelements is currently 0. LaGriT book-keeping routines will update the mesh object as it is modified.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmo/status/3dmesh
</code></pre></div></div>

<p><em>Note: the command <strong>cmo/select/3dmesh</strong> can be added here, but not necessary because there is only one mesh. Also, the <strong>create</strong> command makes the created mesh the current mesh.</em></p>

<h2 id="create-points-for-hex-mesh">Create Points for Hex Mesh</h2>

<p>We will use one of the simple <strong><code class="language-plaintext highlighter-rouge">createpts</code></strong> commands, this version will create a structured rectangular mesh. Checking the syntax for <a href="https://lanl.github.io/LaGriT/pages/docs/commands/createpts/CRTPTBRICK.html">createpts/brick/</a> we see options that can be defined as variables, making them easy to change.</p>

<p>In LaGriT, variables are assigned using the <code class="language-plaintext highlighter-rouge">define</code> keyword. We define the variables before the commands. It is good practice to locate these all together with comments at the top of the command file. You can also use the <strong>define</strong> command multiple times, the last will overwrite previous values. This is an easy way to keep track of resolutions as you try them.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Mesh domain 100x50x80
define / XMIN / 0.
define / XMAX / 100.
define / YMIN / 0.
define / YMAX / 50.
define / ZMIN / 0.
define / ZMAX / 80.

# Set the number of points along each axis
# Spacing of 10 will have 11 points for length 100
define / NX / 11
define / NY / 6

# try 10 meter spacing with 9 nodes first
# overwrite and use 5 meter spacing with 17 nodes
define / NZ / 9
define / NZ / 17
</code></pre></div></div>

<p>Above, the spatial domain (MIN and MAX values) and node density (<code class="language-plaintext highlighter-rouge">NX/NY/NZ</code>) have been defined.
Now we can use the define values to add points to the mesh object.
The <a href="/pages/docs/commands/createpts/CRTPTBRICK.html"><code class="language-plaintext highlighter-rouge">createpts / brick</code></a> command will generate a defined number of
hex elements across a defined domain.</p>

<p><code class="language-plaintext highlighter-rouge">NX</code> number of hex elements, along with their corresponding vertices, will be created in the spatial domain along the X axis, with <code class="language-plaintext highlighter-rouge">NY</code> elements in the Y domain and <code class="language-plaintext highlighter-rouge">NZ</code> elements in the Z domain.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>createpts/brick/xyz/ NX NY NZ / XMIN YMIN ZMIN/ XMAX YMAX ZMAX / 1,1,1
</code></pre></div></div>

<p>As shown in the screen report, <strong><code class="language-plaintext highlighter-rouge">createpts/brick</code></strong> creates 1122 hex points and 800 hex elements. The connect option should not be used for the <strong>brick</strong> option because the hex connectivity is created automatically.</p>

<h2 id="set-materials-and-boundary-tags">Set Materials and Boundary Tags</h2>

<p>It is good practice to set materials for nodes (imt) and elements (itetlcr) to 1 before continuing. A 0 value in these arrays will cause some viewers to ignore that point or element. These attributes must be positive non-zero integers.</p>

<p><em>Note 1,0,0 represents all for node start,stride,end</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmo / setatt / 3dmesh / imt / 1,0,0 / 1
cmo / setatt / 3dmesh / itetclr / 1,0,0 / 1
</code></pre></div></div>

<p>It is also good practice to reset the itp attribute anytime materials are changed. This attribute indicates which nodes are on the boundary and which are internal and is used in many of the meshing routines.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resetpts/itp
</code></pre></div></div>

<h2 id="check-the-mesh">Check the Mesh</h2>

<p>View the Mesh Object status, brief version. This report affirms the creation of a 3D hex mesh. The <strong>brief</strong> option shows the cmo header without all the attributes.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmo/status/ 3dmesh / brief
</code></pre></div></div>

<p>View the min max values of the mesh attributes of the coordinates as another check.
The keyword -all- or -xyz- can be used to view mesh object attributes.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmo/printatt/3dmesh/ -xyz- minmax
</code></pre></div></div>

<p>Check the mesh with the <strong><code class="language-plaintext highlighter-rouge">quality</code></strong> command.  There should be no negative or zero volumes.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>quality
</code></pre></div></div>

<h2 id="write-the-mesh-and-view">Write the Mesh and View</h2>

<p>Write an AVS format mesh file for viewing the mesh.
This file can be rendered in certain scientific 3D visualization applications such as Paraview.</p>

<p>Viewing this mesh, you should see something like the image at the top of the page.
By default, Paraview will color the mesh by imt values which are all equal to 1.</p>

<p>View the mesh using the node attribute itp to see the boundary nodes. The outside nodes will have value of 10 and internal nodes will have value 0. Note when viewing a mesh colored by a node, the colors will “bleed” from one node to the next. Views colored by cell or element will be more distinct.</p>

<p>Image shows hex mesh with node itp colors. The mesh is clipped in half to see the inside nodes of the mesh.</p>
<p><a href="step_01/01_hex_mesh_itp.png"> <img width="300" src="step_01/01_hex_mesh_itp.png" /> </a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dump/ avs / 01_hex_mesh.inp / 3dmesh
</code></pre></div></div>

<h2 id="finish">finish</h2>

<p>Always end a session or a file with the <strong>finish</strong> command and a line return after the finish command. The command line parser will not parse a command without a line return.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>finish

</code></pre></div></div>

<h4 id="lagrit-introduction-index"><a href="index.html">LaGriT Introduction Index</a></h4>
<h4 id="step-1-create-a-hex-mesh"><a href="step_01.html">Step 1. Create a Hex Mesh</a></h4>
<h4 id="step-2-convert-hex-mesh-to-tet-mesh"><a href="step_02.html">Step 2. Convert Hex Mesh to Tet Mesh</a></h4>
<h4 id="step-3-assign-materials-to-the-mesh"><a href="step_03.html">Step 3. Assign materials to the Mesh</a></h4>
<h4 id="step-4-write-mesh-and-fehm-setup-files"><a href="step_04.html">Step 4. Write Mesh and FEHM Setup Files</a></h4>



            </div>
        </div>

        <!-- Begin footer -->
        <footer class="footer-distributed">
            <div class="footer-right">
              <div><img src="/assets/img/lanl_logo_white.png" height="80"></div>
            </div>

            <div class="footer-left lg-background-color">
                <p class="footer-links" style="font-family: 'Fira Sans', sans-serif; color: white;">
                    <a href="/">Home</a>
                    ·
                    <a href="/pylagrit/original/index.html">PyLaGriT</a>
                    ·
                    <a href="https://int.lanl.gov/org/ddste/aldcels/ees/index.shtml">EES-16</a>
                    ·
                    <a href="/pages/licensing.html">License</a>
                    ·
                    <a href="https://lagrit.lanl.gov/">Contact</a>
                </p>

                <p>&copy; 2019 Los Alamos National Laboratory</p>
                <p>EES-16 | Computational Earth Science</p>
                <p>LA-CC-15-069</p>
            </div>
        </footer>

        <!-- Begin Navigation Bar -->
        <div id="offcanvas" uk-offcanvas="mode: push; overlay: true" class="uk-offcanvas">
            <div class="uk-offcanvas-bar">
                <div class="uk-panel">
                    <ul class="uk-nav uk-nav-default tm-nav">
                        <form class="uk-search uk-search-default" action="https://lanl.github.io/LaGriT/search/">
                            <a href="" uk-search-icon></a>
                            <input class="uk-search-input" type="search" placeholder="" name="q" id="tipue_search_input_mobile">
                        </form>
                        <li class="uk-nav-header">General</li>
                        <li><a href="/">Home</a></li>
                        <li><a href="/pages/commands">Commands</a></li>
                        <li><a href="/pages/release">Release Notes</a></li>
                        <li><a href="/pages/publications">Publications</a></li>
                        <li><a href="http://github.com/lanl/LaGriT">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- End Navigation Bar -->

    </div>

</body>

</html>
