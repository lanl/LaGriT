<html lang="en-gb" dir="ltr">

<head>
    <title>DOPING</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="LaGriT : LaGriT is a library providing mesh generation and optimization for a variety of polyhedra and dimensions.">
    <link href="https://fonts.googleapis.com/css?family=Do+Hyeon|Fira+Sans" rel="stylesheet">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Reg-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Light-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" href="/assets/css/uikit_theme.css">
    <link rel="icon" type="image/x-icon" href="https://www.lanl.gov/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/assets/css/footer.css">

    <!-- load stylesheets -->
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.2.0/he.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.2/marked.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.2/vue-router.min.js" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit-icons.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/highlightjs/highlight.min.js" defer=""></script>
    <script src="https://getuikit.com/app/main.min.js?1180" defer=""></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-42150424-1" async=""></script>

    <!-- tipuesearch files -->
    <link rel="stylesheet" href="/assets/tipuesearch/css/normalize.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="/assets/tipuesearch/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">
    <script src="/assets/tipuesearch/tipuesearch_set.js"></script>
    <script src="/assets/tipuesearch/tipuesearch.min.js"></script>

    <!-- Finally, load global style to overwrite template, tipuesearch, etc. -->
    <!--<link rel="stylesheet" href="/assets/globalstyle.css">-->
</head>

<body>
    <div>
        <!-- Header -->
        <div uk-sticky="media: 960" class="uk-navbar-container tm-navbar-container uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 100%; color: #212328;">
            <div class="uk-container uk-container-expand">
                <nav class="uk-navbar">
                    <div class="uk-navbar-left">
                        <a href="/" class="uk-navbar-item uk-logo" style="font-family: 'Do Hyeon', sans-serif; color: white;">
                            <img uk-img src="/assets/img/logo.png" width="50" class="uk-margin-small-right" alt="LANL logo">
                            LaGriT
                        </a>
                    </div>
                    <div class="uk-navbar-right">
                        <ul class="uk-navbar-nav uk-visible@m">
                            <li><a href="/pages/commands">Commands</a></li>
                            <li><a href="/pages/tutorial/index">Tutorials</a></li>
                            <li><a href="/pages/release">Release Notes</a></li>
                            <li><a href="/pages/publications">Publications</a></li>
                            <li><a href="http://github.com/lanl/LaGriT"><span uk-icon="github"></span></a></li>

                            <!-- Begin search bar -->
                            <div class="nav-overlay uk-navbar-right">
                                <a class="uk-navbar-toggle" uk-search-icon uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <div class="nav-overlay uk-navbar-left uk-flex-1" hidden>
                                <div class="uk-navbar-item uk-width-expand">
                                    <form class="uk-search uk-search-navbar uk-width-1-1" action="https://lanl.github.io/LaGriT/search/">
                                        <input class="uk-search-input" name="q" type="search" id="tipue_search_input" placeholder="Search..." autofocus>
                                    </form>
                                </div>
                                <a class="uk-navbar-toggle" uk-close uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <script>
                                $(document).ready(function() {
                                  $('#tipue_search_input').tipuesearch({
                                        'show': 10,
                                        'newWindow'  : true,
                                        'showURL' : true,
                                        'showTitleCount' : true,
                                        'descriptiveWords' : 20,
                                        'highlightTerms' : true,
                                        'mode': 'static',
                                  });
                                });
                            </script>
                            <!-- End search bar -->

                        </ul>
                        
                        <a uk-navbar-toggle-icon="" href="#offcanvas" uk-toggle="" class="uk-navbar-toggle uk-hidden@m uk-icon uk-navbar-toggle-icon">
                            <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="navbar-toggle-icon">
                                <rect y="9" width="20" height="2"></rect>
                                <rect y="3" width="20" height="2"></rect>
                                <rect y="15" width="20" height="2"></rect>
                            </svg>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
        <div class="uk-sticky-placeholder" style="height: 80px; margin: 0px;"></div>
        <!-- End Header -->

        <!-- Main Body text -->
        <div class="tm-main uk-section uk-section-default">
            <div class="uk-container uk-container-small uk-position-relative">

                <h1 id="doping-replaced-with--interpolate">DOPING replaced with  <a href="/pages/docs/commands/main_interpolate.html">INTERPOLATE</a></h1>

<hr />

<p>Old command to interpolate between mesh object attributes or assign values to a mesh object attribute.</p>

<p>Note: <strong><code class="language-plaintext highlighter-rouge">interpolate/map</code></strong> replaces the command <strong><code class="language-plaintext highlighter-rouge">doping/integer1</code></strong> which copied source itetclr values
to sink imt values. <strong><code class="language-plaintext highlighter-rouge">interpolate/voronoi</code></strong> replaces <strong><code class="language-plaintext highlighter-rouge">doping/integer2</code></strong> which copied nearest node source imt to sink imt.
<strong><code class="language-plaintext highlighter-rouge">interpolate/continuous</code></strong> evolved from the <strong><code class="language-plaintext highlighter-rouge">doping/table</code></strong> command. The interpolate command has newer updates
to include attribute selections and expanded options.</p>

<h2 id="syntax">SYNTAX</h2>

<pre>
<b>doping</b>/constant/field_out/set|add|sub/ ifirst,ilast,istride/value 

<b>doping</b>/gaussian/field_out/set|add|sub/ ifirst,ilast,istride/ xyz/x1,y1,z1/x2,y2,z2/lateral_diffusion/ concentration/standard_deviation/ 

<b>doping</b>/table/field_out/set|add|sub/cmo_ref/attr_ref/[linear|log|asinh] 

<b>doping</b>/table/field_out/set|add|sub/cmo_ref/attr_ref/[linear|log|asinh]/ [geom_out/geom_ref] 

<b>doping</b>/integer1/imt1/set/ifirst,ilast,istride/cmo_ref /imt1/min|max 

<b>doping</b>/integer2/field_out2/set/ifirst,ilast,istride/cmo_ref/attr_ref/min|max|minp|maxp/[create|use]
</pre>

<p>Options <strong>constant</strong> and <strong>gaussian</strong> assign values to a mesh object
  attribute.  Options <strong>table</strong>, <strong>integer1</strong>, and <strong>integer2</strong>
  interpolate from a reference mesh object.</p>

<p>The <strong>constant</strong> option assigns a constant value to all specified
  nodes.</p>

<p>The <strong>gaussian</strong> option creates a very special gaussian distribution
  around a line or point.  The bounding box (x1,y1,z1) to (x2,y2,z2)
  specifies where the peak concentration will be, Note: y2 is ignored;
  if z1=z2 then the distribution will be around a point.  All
  coordinates are assumed to be given as Cartesian, <strong>xyz</strong> is
  required.  The value assigned to the attribute is determined by the
  Gaussian distribution:</p>

<p>value = concentration * exp(-(L/std_dev) * *2)</p>

<p>where L is the effective distance and can be represented as:</p>

<p>L = sqrt( dy<strong>2 + (1/lateral_diffusion)*(dx</strong>2 + dz**2) )</p>

<p>and where</p>

<p>dy = y-y1 (y2 ignored) <br />
   dx = x-x1 if x &lt; x1 &lt; x2 <br />
   = 0 if x1 &lt; x &lt; x2 <br />
   = x-x2 if x1 &lt; x2 &lt; x <br />
   dz similar to dx.</p>

<p>The <strong>table</strong> option interpolates an attribute from a reference mesh
  object and reference attribute onto the current mesh object using
  <strong>linear</strong>, <strong>log</strong> or <strong>asinh</strong> interpolation (the default is
  linear).  In the case of 2D tabular interpolation, additional
  arguments specify the planar correspondence for the interpolation:
  geom_out and geom_ref refer to the output and reference
  orientation of a 2D axial distribution and may take the values,
  <strong>xy, yz, xz</strong>,  .</p>

<p>In all cases, field_out specifies the name of the attribute,
  ifirst, ilast, istride specify a point set restriction, and <strong>set
  add or subtract</strong> indicate if the calculated or input-value is added
  to, subtracted from or used to set the existing node attribute
  value.</p>

<p>If the values to be doped (interpolated) are integers (options
  <strong>integer1</strong> and <strong>integer2</strong>), doping works in two ways.  For
  integer doping, only the <strong>set</strong> option is implemented.</p>

<p>If the second field is <strong>integer1</strong>, the new nodal attributes are
  based on element material types. Set field_out and attr_ref to
  <strong>imt1</strong> in this case. The <strong>integer1</strong> option is implemented only
  for setting node material (<strong>imt1</strong>). The <strong>imt1</strong> values of the
  active mesh object nodes will be set by determining which element in
  the reference mesh object the node falls in. This element’s material
  (<strong>itetclr</strong>) value is then assigned to the node <strong>imt1</strong>.</p>

<p>The <strong>integer2</strong> option sets node based attributes in the active
  mesh object by determining which voronoi cell in the reference mesh
  object the node falls in. Then the value for the node corresponding
  to this voronoi cell is copied to the active node.</p>

<p>If the second field is <strong>integer2</strong>, the new nodal attributes are
  based on the table attribute types using the Voronoi cells around
  the table nodes.</p>

<p>For integer doping, function can be <strong>min</strong> or <strong>max</strong> to choose
  what happens if a cmo_out node falls on a boundary between two
  elements or Voronoi cells. For 3d, Voronoi cell based doping,
  function can also be <strong>minp</strong> or <strong>maxp</strong> which makes any cmo_out
  nodes that fall outside the cmo_table geometry set to the maximum
  number of materials plus one. Mapset can be set to <strong>create</strong>,
  <strong>use</strong>, or left blank. If <strong>create</strong> is used then an idop attribute
  is formed that maps the cmo_table nodes to the cmo_out nodes. If
  <strong>use</strong> is used, doping will read and use this previously formed and
  saved mapping. Note that doping of integers should be done without
  child/parent relationships. If parents exist, the doping results are
  unpredictable at interface boundaries because the value of parent
  nodes are unpredictable there.</p>

<h2 id="examples">EXAMPLES</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   doping/constant/density/set/pset,get,mypset/9.73 
</code></pre></div></div>

<p>For the current mesh object, the value of the attribute density will be set to 9.73 
for all nodes in the point set mypset.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   doping/gaussian/density/add/pset,mypset/xyz/0.0,0.5,0.1/0.5,0.5,0.4/0.5/5.0e+18/0.225 
</code></pre></div></div>

<p>For the current mesh object, for nodes in mypset, the value of the 
attribute density will be augmented by 
the value of the distribution as defined above.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>doping/table/my_field/set/1,0,0/cmo_ref/attr_ref/log 
</code></pre></div></div>

<p>For the current mesh object, the value of the attribute my_field will be set by 
interpolating from the reference mesh object and attribute.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> doping/table/Saturation /set/1,0,0/cmo_course/saturation_course/linear/zx/yx/ 
</code></pre></div></div>

<p>In this case the yx plane from the reference cmo is interpolated onto the zx plane of the 
current mesh object:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>doping/integer1/imt1/set/1,0,0/cmo_old/imt1/min 
</code></pre></div></div>

<p>See which element of cmo_old each node of the current mesh object falls in, and set the imt1 attribute value to the itetclr of the element in cmo_old.  If the node falls in more than one element use the smallest itetclr.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>doping/integer2/rad2/set/1,0,0/cmo_old/rad1/min/create 
</code></pre></div></div>

<p>Create the voronoi cells around the nodes in cmo_old.  See which voronoi cell the nodes in the current mesh object fall in and set the value of the attribute rad2 from the value of the attribute rad1 in the reference mesh object.  If there is a conflict use the smallest value.  Create a new attribute called idop as explained above.</p>


            </div>
        </div>

        <!-- Begin footer -->
        <footer class="footer-distributed">
            <div class="footer-right">
              <div><img src="/assets/img/lanl_logo_white.png" height="80"></div>
            </div>

            <div class="footer-left lg-background-color">
                <p class="footer-links" style="font-family: 'Fira Sans', sans-serif; color: white;">
                    <a href="/">Home</a>
                    ·
                    <a href="/pylagrit/original/index.html">PyLaGriT</a>
                    ·
                    <a href="https://int.lanl.gov/org/ddste/aldcels/ees/index.shtml">EES-16</a>
                    ·
                    <a href="/pages/licensing.html">License</a>
                    ·
                    <a href="https://lagrit.lanl.gov/">Contact</a>
                </p>

                <p>&copy; 2019 Los Alamos National Laboratory</p>
                <p>EES-16 | Computational Earth Science</p>
                <p>LA-CC-15-069</p>
            </div>
        </footer>

        <!-- Begin Navigation Bar -->
        <div id="offcanvas" uk-offcanvas="mode: push; overlay: true" class="uk-offcanvas">
            <div class="uk-offcanvas-bar">
                <div class="uk-panel">
                    <ul class="uk-nav uk-nav-default tm-nav">
                        <form class="uk-search uk-search-default" action="https://lanl.github.io/LaGriT/search/">
                            <a href="" uk-search-icon></a>
                            <input class="uk-search-input" type="search" placeholder="" name="q" id="tipue_search_input_mobile">
                        </form>
                        <li class="uk-nav-header">General</li>
                        <li><a href="/">Home</a></li>
                        <li><a href="/pages/commands">Commands</a></li>
                        <li><a href="/pages/release">Release Notes</a></li>
                        <li><a href="/pages/publications">Publications</a></li>
                        <li><a href="http://github.com/lanl/LaGriT">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- End Navigation Bar -->

    </div>

</body>

</html>
