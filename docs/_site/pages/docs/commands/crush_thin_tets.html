<html lang="en-gb" dir="ltr">

<head>
    <title>crush_thin_tets</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="LaGriT : LaGriT is a library providing mesh generation and optimization for a variety of polyhedra and dimensions.">
    <link href="https://fonts.googleapis.com/css?family=Do+Hyeon|Fira+Sans" rel="stylesheet">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Reg-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Light-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" href="/assets/css/uikit_theme.css">
    <link rel="icon" type="image/x-icon" href="https://www.lanl.gov/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/assets/css/footer.css">

    <!-- load stylesheets -->
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.2.0/he.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.2/marked.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.2/vue-router.min.js" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit-icons.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/highlightjs/highlight.min.js" defer=""></script>
    <script src="https://getuikit.com/app/main.min.js?1180" defer=""></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-42150424-1" async=""></script>

    <!-- tipuesearch files -->
    <link rel="stylesheet" href="/assets/tipuesearch/css/normalize.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="/assets/tipuesearch/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">
    <script src="/assets/tipuesearch/tipuesearch_set.js"></script>
    <script src="/assets/tipuesearch/tipuesearch.min.js"></script>

    <!-- Finally, load global style to overwrite template, tipuesearch, etc. -->
    <!--<link rel="stylesheet" href="/assets/globalstyle.css">-->
</head>

<body>
    <div>
        <!-- Header -->
        <div uk-sticky="media: 960" class="uk-navbar-container tm-navbar-container uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 100%; color: #212328;">
            <div class="uk-container uk-container-expand">
                <nav class="uk-navbar">
                    <div class="uk-navbar-left">
                        <a href="/" class="uk-navbar-item uk-logo" style="font-family: 'Do Hyeon', sans-serif; color: white;">
                            <img uk-img src="/assets/img/logo.png" width="50" class="uk-margin-small-right" alt="LANL logo">
                            LaGriT
                        </a>
                    </div>
                    <div class="uk-navbar-right">
                        <ul class="uk-navbar-nav uk-visible@m">
                            <li><a href="/pages/commands">Commands</a></li>
                            <li><a href="/pages/release">Release Notes</a></li>
                            <li><a href="/pages/publications">Publications</a></li>
                            <li><a href="http://github.com/lanl/LaGriT"><span uk-icon="github"></span></a></li>

                            <!-- Begin search bar -->
                            <div class="nav-overlay uk-navbar-right">
                                <a class="uk-navbar-toggle" uk-search-icon uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <div class="nav-overlay uk-navbar-left uk-flex-1" hidden>
                                <div class="uk-navbar-item uk-width-expand">
                                    <form class="uk-search uk-search-navbar uk-width-1-1" action="https://lanl.github.io/LaGriT/search/">
                                        <input class="uk-search-input" name="q" type="search" id="tipue_search_input" placeholder="Search..." autofocus>
                                    </form>
                                </div>
                                <a class="uk-navbar-toggle" uk-close uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <script>
                                $(document).ready(function() {
                                  $('#tipue_search_input').tipuesearch({
                                        'show': 10,
                                        'newWindow'  : true,
                                        'showURL' : true,
                                        'showTitleCount' : true,
                                        'descriptiveWords' : 20,
                                        'highlightTerms' : true,
                                        'mode': 'static',
                                  });
                                });
                            </script>
                            <!-- End search bar -->

                        </ul>
                        
                        <a uk-navbar-toggle-icon="" href="#offcanvas" uk-toggle="" class="uk-navbar-toggle uk-hidden@m uk-icon uk-navbar-toggle-icon">
                            <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="navbar-toggle-icon">
                                <rect y="9" width="20" height="2"></rect>
                                <rect y="3" width="20" height="2"></rect>
                                <rect y="15" width="20" height="2"></rect>
                            </svg>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
        <div class="uk-sticky-placeholder" style="height: 80px; margin: 0px;"></div>
        <!-- End Header -->

        <!-- Main Body text -->
        <div class="tm-main uk-section uk-section-default">
            <div class="uk-container uk-container-small uk-position-relative">

                <h1 id="crush_thin_tets">CRUSH_THIN_TETS</h1>

<hr />

<p>This algorithm can be used to reduce sliver shaped tetrahedrals from a mesh.</p>

<h2 id="syntax">SYNTAX</h2>

<pre>
<b>crush_thin_tets</b>/ cmo_name / [ TOLCRUSH ] / [pset,get,psetname]
</pre>

<p><code class="language-plaintext highlighter-rouge">cmo_name</code> is the mesh object name.</p>

<p><code class="language-plaintext highlighter-rouge">TOLCRUSH</code> is the optional value providing a measurement selection to crush, the default value is .1</p>

<p><strong>pset,get,</strong> <code class="language-plaintext highlighter-rouge">psetname</code> is the optional node selection for part of the mesh.</p>

<h2 id="description">DESCRIPTION</h2>

<p><strong><code class="language-plaintext highlighter-rouge">crush_thin_tets</code></strong> loops thru tets of a volume mesh
and looks for elements that, relative to the characteristic
length established by the normalized root mean square length
of the edges, are thinner than TOLCRUSH.</p>

<p>In the case that thinness is defined as the minimum tet altitude, then this relative length
is actually an aspect ratio, because it goes to zero if
the tet is degenerate and has a maximal value of 1 for a regular tet.</p>

<p>Given the relative length scale, we can measure thinness
not just of the altitudes, but of any distance measurement in the tet.
In particular there are four type of thin situations
possible for a bad tet and we take appropriate actions for each case:</p>

<p>1) If an element has relative edge length shorter than TOLCRUSH, it is merged.</p>

<p>2) If a normal point-to-edge projection has relative length &lt; TOLCRUSH,
    a node is added to the edge, so that a type (1) merge can take place.</p>

<p>3) If a normal point-to-face projection has relative length &lt; TOLCRUSH,
     a node is added to the face, so that a type (1) merge can take place.</p>

<p>4) If a normal mutual diagonal-to-diagonal projection has relative length &lt; TOLCRUSH, 
    a node is added to one diagonal, so that a type (2) situation is created
    (which leads to another refinement and a type (1) merge).</p>

<p>Since there are situations when a type (1) action would be barely
rejected on tolerance, but the more complicated type (2) action
would be barely accepted on tolerance, we loosen the tolerance
slightly for type (1) actions relative to type (2) actions to avoid this.
Similarly, there are situations when a type (2) action would be
barely rejected on tolerance, but the more complicated type (3)
or type (4) actions would be barely accepted on tolerance.
To avoid this we loosen the tolerance of type (2) actions relative
to type (3) and type(4) actions.</p>

<p>Currently we are using these effective tolerances (on relative length):</p>
<ul>
  <li>type 1 : 1.2*TOLCRUSH</li>
  <li>type 2 : 1.1*TOLCRUSH</li>
  <li>type 3 : TOLCRUSH</li>
  <li>type 4 : TOLCRUSH</li>
</ul>

<h2 id="examples">EXAMPLES</h2>

<p>The LaGriT input is an AVS format file with a thin tet number 1 with aspect ratio of .149 making it a sliver.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  6   5  0 0 0
1  0. -1. .05 
2  1. 0. -.05 
3  0. 1. .05 
4  -1. 0. -.05 
5  0.  0. -2.
6  0.  0. 2.
1 1 tet 1 4 2 3
2 2 tet 1 2 4 5
3 3 tet 1 4 3 6
4 4 tet 2 3 4 5
4 5 tet 2 1 3 6
</code></pre></div></div>

<p>This example calls crush_thin_tets twice, once with TOLCRUSH= .1 and again with TOLCRUSH .15, a value larger than the known aspect ratio of .149.
As a result, nothing will happen on the first call. The second call will find and crush the sliver by splitting elements and merging edges to create a new mesh without the sliver.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>crush_thin_tets / cmotet / .1
rmpoint/compress
resetpts itp

crush_thin_tets / cmotet / .15
rmpoint/compress
resetpts itp
</code></pre></div></div>

<p>The first call has no change to the input. The second call splits tets such that thin tet is eliminated. Images show the input tet cell numbers and node numbers (left), the input tet elements exploded for viewing (middle), the output from crush_thin_tets with exploded view (right).</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
      <th style="text-align: center"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"><strong>input tet id numbers</strong></td>
      <td style="text-align: center"><strong>input tets exploded</strong></td>
      <td style="text-align: center"><strong>output tets exploded</strong></td>
    </tr>
    <tr>
      <td style="text-align: center"><img width="400" src="https://lanl.github.io/LaGriT/assets/images/crush_input.png" /></td>
      <td style="text-align: center"><img width="400" src="https://lanl.github.io/LaGriT/assets/images/crush_input_ex.png" /></td>
      <td style="text-align: center"><img width="400" src="https://lanl.github.io/LaGriT/assets/images/crush_output_ex.png" /></td>
    </tr>
  </tbody>
</table>


            </div>
        </div>

        <!-- Begin footer -->
        <footer class="footer-distributed">
            <div class="footer-right">
              <div><img src="/assets/img/lanl_logo_white.png" height="80"></div>
            </div>

            <div class="footer-left lg-background-color">
                <p class="footer-links" style="font-family: 'Fira Sans', sans-serif; color: white;">
                    <a href="/">Home</a>
                    ·
                    <a href="/pylagrit/original/index.html">PyLaGriT</a>
                    ·
                    <a href="https://int.lanl.gov/org/ddste/aldcels/ees/index.shtml">EES-16</a>
                    ·
                    <a href="/pages/licensing.html">License</a>
                    ·
                    <a href="https://lagrit.lanl.gov/">Contact</a>
                </p>

                <p>&copy; 2019 Los Alamos National Laboratory</p>
                <p>EES-16 | Computational Earth Science</p>
                <p>LA-CC-15-069</p>
            </div>
        </footer>

        <!-- Begin Navigation Bar -->
        <div id="offcanvas" uk-offcanvas="mode: push; overlay: true" class="uk-offcanvas">
            <div class="uk-offcanvas-bar">
                <div class="uk-panel">
                    <ul class="uk-nav uk-nav-default tm-nav">
                        <form class="uk-search uk-search-default" action="https://lanl.github.io/LaGriT/search/">
                            <a href="" uk-search-icon></a>
                            <input class="uk-search-input" type="search" placeholder="" name="q" id="tipue_search_input_mobile">
                        </form>
                        <li class="uk-nav-header">General</li>
                        <li><a href="/">Home</a></li>
                        <li><a href="/pages/commands">Commands</a></li>
                        <li><a href="/pages/release">Release Notes</a></li>
                        <li><a href="/pages/publications">Publications</a></li>
                        <li><a href="http://github.com/lanl/LaGriT">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- End Navigation Bar -->

    </div>

</body>

</html>
