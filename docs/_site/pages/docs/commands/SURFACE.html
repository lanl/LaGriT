<html lang="en-gb" dir="ltr">

<head>
    <title>SURFACE</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="LaGriT : LaGriT is a library providing mesh generation and optimization for a variety of polyhedra and dimensions.">
    <link href="https://fonts.googleapis.com/css?family=Do+Hyeon|Fira+Sans" rel="stylesheet">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Reg-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="https://getuikit.com/fonts/ProximaNova-Light-webfont.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" href="/assets/css/uikit_theme.css">
    <link rel="icon" type="image/x-icon" href="https://www.lanl.gov/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/assets/css/footer.css">

    <!-- load stylesheets -->
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.2.0/he.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.2/marked.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.2/vue-router.min.js" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/uikit/dist/js/uikit-icons.min.js?1180" defer=""></script>
    <script src="https://getuikit.com/assets/highlightjs/highlight.min.js" defer=""></script>
    <script src="https://getuikit.com/app/main.min.js?1180" defer=""></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-42150424-1" async=""></script>

    <!-- tipuesearch files -->
    <link rel="stylesheet" href="/assets/tipuesearch/css/normalize.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="/assets/tipuesearch/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">
    <script src="/assets/tipuesearch/tipuesearch_set.js"></script>
    <script src="/assets/tipuesearch/tipuesearch.min.js"></script>

    <!-- Finally, load global style to overwrite template, tipuesearch, etc. -->
    <!--<link rel="stylesheet" href="/assets/globalstyle.css">-->
</head>

<body>
    <div>
        <!-- Header -->
        <div uk-sticky="media: 960" class="uk-navbar-container tm-navbar-container uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 100%; color: #212328;">
            <div class="uk-container uk-container-expand">
                <nav class="uk-navbar">
                    <div class="uk-navbar-left">
                        <a href="/" class="uk-navbar-item uk-logo" style="font-family: 'Do Hyeon', sans-serif; color: white;">
                            <img uk-img src="/assets/img/logo.png" width="50" class="uk-margin-small-right" alt="LANL logo">
                            LaGriT
                        </a>
                    </div>
                    <div class="uk-navbar-right">
                        <ul class="uk-navbar-nav uk-visible@m">
                            <li><a href="/pages/commands">Commands</a></li>
                            <li><a href="/pages/tutorial/index">Tutorials</a></li>
                            <li><a href="/pages/release">Release Notes</a></li>
                            <li><a href="/pages/publications">Publications</a></li>
                            <li><a href="http://github.com/lanl/LaGriT"><span uk-icon="github"></span></a></li>

                            <!-- Begin search bar -->
                            <div class="nav-overlay uk-navbar-right">
                                <a class="uk-navbar-toggle" uk-search-icon uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <div class="nav-overlay uk-navbar-left uk-flex-1" hidden>
                                <div class="uk-navbar-item uk-width-expand">
                                    <form class="uk-search uk-search-navbar uk-width-1-1" action="https://lanl.github.io/LaGriT/search/">
                                        <input class="uk-search-input" name="q" type="search" id="tipue_search_input" placeholder="Search..." autofocus>
                                    </form>
                                </div>
                                <a class="uk-navbar-toggle" uk-close uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#"></a>
                            </div>

                            <script>
                                $(document).ready(function() {
                                  $('#tipue_search_input').tipuesearch({
                                        'show': 10,
                                        'newWindow'  : true,
                                        'showURL' : true,
                                        'showTitleCount' : true,
                                        'descriptiveWords' : 20,
                                        'highlightTerms' : true,
                                        'mode': 'static',
                                  });
                                });
                            </script>
                            <!-- End search bar -->

                        </ul>
                        
                        <a uk-navbar-toggle-icon="" href="#offcanvas" uk-toggle="" class="uk-navbar-toggle uk-hidden@m uk-icon uk-navbar-toggle-icon">
                            <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="navbar-toggle-icon">
                                <rect y="9" width="20" height="2"></rect>
                                <rect y="3" width="20" height="2"></rect>
                                <rect y="15" width="20" height="2"></rect>
                            </svg>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
        <div class="uk-sticky-placeholder" style="height: 80px; margin: 0px;"></div>
        <!-- End Header -->

        <!-- Main Body text -->
        <div class="tm-main uk-section uk-section-default">
            <div class="uk-container uk-container-small uk-position-relative">

                <h1 id="surface">SURFACE</h1>

<hr />

<p>Defines a boundary, interface, or geometry for a selected mesh object.</p>

<p>Surfaces are used to create geometry <a href="/pages/docs/commands/REGION.html"><strong><code class="language-plaintext highlighter-rouge">REGION</code></strong></a>  and material regions <a href="/pages/docs/commands/MREGION.html"><strong><code class="language-plaintext highlighter-rouge">MREGION</code></strong></a> for a mesh object.</p>

<p>Mesh interfaces will be assigned node constraint (<strong>icr</strong>) values corresponding to the surfaces on which nodes sit. 
The command <a href="/pages/docs/commands/SETTETS.html"><strong><code class="language-plaintext highlighter-rouge">SETTETS</code></strong></a> will generate parent/child node chains (<strong>isn</strong>) for nodes on <strong>intrface</strong> or <strong>intrcons</strong> surfaces.</p>

<p>The <a href="#insideoutside">inside/outside</a> conventions for sheet surfaces are described below.</p>

<h2 id="syntax">SYNTAX</h2>

<pre>
<b>surface</b>/isurname/ ibtype / istype / istype_parameters 

<b>surface</b>/isurname/<b>release</b>
</pre>

<p><code class="language-plaintext highlighter-rouge">isurname</code>  is the name of the surface and must be unique for each surface defined for the current mesh object.</p>

<p><strong>release</strong> will release the previously defined surface referenced by name.  All references will be removed from the geometry data structures and all constraints (icr) values associated with this surface will be removed.</p>

<h3 id="options-for-ibtype">Options for <code class="language-plaintext highlighter-rouge">ibtype</code></h3>

<p>These options define the boundary type and constraints.</p>

<p><strong><code class="language-plaintext highlighter-rouge">free</code></strong> unconstrained, exterior</p>

<p><strong><code class="language-plaintext highlighter-rouge">reflect</code></strong> constrained, exterior, assigned constraint values (icr).</p>

<p><strong><code class="language-plaintext highlighter-rouge">intrface</code></strong> unconstrained, interior, will generate parent/child node chains (isn).</p>

<p><strong><code class="language-plaintext highlighter-rouge">intrcons</code></strong>  constrained, internal, are assigned constraint values (icr) and will generate parent/child node chains (isn).</p>

<p><strong><code class="language-plaintext highlighter-rouge">virtual</code></strong> constrained, internal surfaces which have different materials on either side of the virtual interfaces do not
separate material regions but are intended to identify other structural features of a geometry. Nodes on this surface will be assigned constraint values (icr).</p>

<h3 id="options-for-istype">Options for <code class="language-plaintext highlighter-rouge">istype</code></h3>

<p><em><code class="language-plaintext highlighter-rouge">istype</code></em> are types of surfaces represented by geometric shapes. Each type has parameters specific to its geometry.</p>

<p><strong><code class="language-plaintext highlighter-rouge">box</code></strong> / <code class="language-plaintext highlighter-rouge">xmin,ymin,zmin</code> / <code class="language-plaintext highlighter-rouge">xmax,ymax,zmax</code> is a cube defined by min and max coordinates, i.e bottom left and top right corners.</p>

<p><strong><code class="language-plaintext highlighter-rouge">cylinder</code></strong> / <code class="language-plaintext highlighter-rouge">x1,y1,z1/x2,y2,z2/radius</code> is a cylinder defined by point 1 bottom center and point 2  top center. The radius is the length from center to cylinder edge. Cylinders are open but finite.  To create a closed cylinder cap both ends with planes.</p>

<p><strong><code class="language-plaintext highlighter-rouge">cone</code></strong> / <code class="language-plaintext highlighter-rouge">x1,y1,z1/x2,y2,z2/radius</code> is a cone where point 1 is the vertex and point 2 is the base center of the cone with radius from that point. A cone is finite but does have an open end. To create a closed cone cap the open end with a plane.</p>

<p><strong><code class="language-plaintext highlighter-rouge">ellipse</code></strong> / <code class="language-plaintext highlighter-rouge">x1,y1,z1 / x2,y2,z2 / x3,y3,z3 / ar,br,cr</code> is an ellipse point 1 is the center of the ellipsoid and point 2 is on the a semi-axis (new x), point 3 is on the b semi-axis (new y). The values ar, br, cr are radii on their respective semi-axes.</p>

<p><strong><code class="language-plaintext highlighter-rouge">parallel</code></strong> /  <code class="language-plaintext highlighter-rouge">x1,y1,z1 / x2,y2,z2 / x3,y3,z3 / x4,y4,z4</code> is a parallel piped where points 1, 2, 3 are the front left, front right and back left points of the base and point 4 is the upper left point of the front face.</p>

<p><strong><code class="language-plaintext highlighter-rouge">plane</code></strong> or <strong><code class="language-plaintext highlighter-rouge">planexyz</code></strong> / <code class="language-plaintext highlighter-rouge">x1,y1,z1 / x2,y2,z2 / x3,y3,z3</code> is a plane defined by 3 coordinate points. The direction normal to the plane is determined by the order of the points according to the right hand rule.</p>

<p><strong><code class="language-plaintext highlighter-rouge">planertz</code></strong> / <code class="language-plaintext highlighter-rouge">radius1, theta1, z1, radius2, theta2, z2, radius ,zcen</code> is a plane defined by cylindrical coordinate system.</p>

<p><strong><code class="language-plaintext highlighter-rouge">planertp</code></strong> / <code class="language-plaintext highlighter-rouge">radius1,theta1,phi1, radius2,theta2,phi2, radius3,theta3,phi3/ xc, yc, zc</code> is a plane defined by spherical coordinate system.</p>

<p><strong><code class="language-plaintext highlighter-rouge">sphere</code></strong> / <code class="language-plaintext highlighter-rouge">xc, yc, zc, radius</code> is a sphere defined by the center point and the radius distance from center point to sphere surface.</p>

<p><strong><code class="language-plaintext highlighter-rouge">sheet</code></strong> / <code class="language-plaintext highlighter-rouge">cmo_name</code> is a surface defined by a mesh object  that is a 2D quad or triangle connected mesh. See <a href="#insideoutside">inside/outside</a> conventions below for a description of inside/outside or left/right with respect to sheet surfaces.</p>

<p><strong><code class="language-plaintext highlighter-rouge">tabular</code></strong> / <code class="language-plaintext highlighter-rouge">x1,y1,z1/x2,y2,z2</code>/ <strong>rz</strong> or <strong>rt</strong> / is a rotated tabular profile where point 1 and point 2 define the axis of rotation for the tabular profile with point 1 as the origin. This is followed by pairs of profile descriptors depending on the value of rz or rt. If <strong>rz</strong>, then the r value is a radius normal to the axis of rotation and z is the distance along the new axis of rotation. If set to <strong>rt</strong> then theta is the angle from the axis of rotation at point 1 and r is the distance from point 1 along theta. The first pair must start on a new line and all lines must contain pairs of data. The last pair of data must be followed by <strong>end</strong>.</p>
<pre>
surface/s_name/ibtype/<b>tabular</b> / x1,y1,z1 / x2,y2,z2 / <b>rz</b> / &amp;
r1,z1 &amp; 
r2,z2 &amp; 
.... 
rn,zn &amp; 
<b>end</b>

or 

surface/s_name/ibtype/<b>tabular</b> / x1,y1,z1 / x2,y2,z2 / <b>rt</b> / &amp;
r1,theta1 &amp; 
r2,theta2 &amp; 
... 
rn,thetan &amp; 
<b>end</b>
</pre>

<hr />

<h2 id="examples">EXAMPLES</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>surface / s_box / reflect / box / -1. -1. -1. / 1. 1. 1.
region/ r_box / le s_box
</code></pre></div></div>
<p>Define a region inside or equal to a box with lower left corner (-1. -1. -1.) and upper right corner at (1. 1. 1.).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>read avs surfmesh_input.inp mosurf

cmo/select/motet
surface/surf_bndry/intrface/sheet/mosurf
region/ rout / ge surf_bndry
eltset/ eout / region / rout
</code></pre></div></div>
<p>Read a triangulated surface to truncate a mesh. Use the surface to find elements outside the surface and name the set “eout”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>surface / s_cone / reflect / cone / .1 .1 .1 / .5 .5 .5 / .3
</code></pre></div></div>
<p>Define a cone surface with tip at (.1 .1 .1) and center at (.5 .5 .5) with .3 radius.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>define XC     498.0
define YC     539.0
define ZBOT  -500.0
define ZTOP   500.0
define RAD     42.0
surface/ s_cyl /intrface/cylinder/XC,YC,ZBOT/XC,YC,ZTOP/ RAD
</code></pre></div></div>
<p>Use define variables to create a cylinder shaped surface.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>surface / s_ellipse / reflect / ellipse / &amp;
        552250.0 4121975.0 1275.0 / &amp;
        552251.0 4121975.0 1275.0 / &amp;
        552250.0 4121976.0 1275.0 / &amp;
        500.0 225.0 125.0
region / r_ellipse / le s_ellipse
eltset/ereset/region/r_ellipse
</code></pre></div></div>
<p>Define an ellipsed shaped region and select elements.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>define x1 497000.
define y1 540612.
define x2 499300.
define y2 540100.
define x3 497000.
define y3 541316.
surface/SSBOX/intrface/parallel/x1,y1,1700./ &amp;
   x2,y2,1700./x3,y3,1700./x1,y1,5000./


define x1 499029.5961
define x2 500174.3616
define y1 538579.7712
define y2 539378.5612
define uleft 1779.9725
define uright 1778.7472
define lleft 1779.7481
define lright 1778.5228
surface/ swtr / intrface /plane/ x2, y1, lright / x2, y2, uright / x1, y2, uleft


surface / bbox / reflect / box / .1 .1 .1 / .9 .9 .9
surface / s1 / intrface / sheet  / cmo_2
surface / s2 / intrface / sheet  / cmo_3
region / r1 / lt bbox and gt s1 and gt s2
region / r2 / lt bbox and gt s1 and lt s2
region / r3 / lt bbox and lt s1 and gt s2
region / r4 / lt bbox and lt s1 and lt s2
</code></pre></div></div>
<p>Set up a parallel piped and plane surfaces then define sheet surfaces from the triangulations in cmo_2 and cmo_3.
Define geometry regions relative to the surfaces.</p>

<h2 id="sheet-surfaces-insideoutside-convention-">Sheet surfaces inside/outside Convention <a name="insideoutside"></a></h2>

<p>Inside/outside  will be determined by the following algorithm:</p>

<ul>
  <li>
    <p>For the point being considered, p, find the nearest sheet triangle
and the closest point, q, to p that lies on that triangle.</p>
  </li>
  <li>
    <p>Construct the vector <img width="`20" src="https://lanl.github.io/LaGriT/assets/images/Image255.gif" />, from q to p.</p>
  </li>
  <li>
    <p>Construct the outward normal to the triangle, <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image256.gif" /></p>
  </li>
</ul>

<p>The outward normal is constructed using the right hand rule and the order of the
points in the sheet. Sheets may be specified as quad Mesh Object (i.e. a
2 dimensional array of points containing the coordinates of the corners
of each quad). Either two triangles (divide each quad in two using point
(i,j) and (i+1,j+1)) or four triangles (add a point in the center of the
quad) are generated by each quad. Applying the right hand rule to the
points (i,j), (i+1,j), (i+1,j+1) gives the direction of the normal for
all triangles created from the quad.</p>

<ul>
  <li>
    <p>If <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image255.gif" /> <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image256.gif" />  &lt; 0 then
the point is inside. If  <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image255.gif" /> <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image256.gif" />  &gt;0 the
point is outside. If <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image255.gif" /> <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image256.gif" />  * n = 0, and if
p is on the triangle then p=q and p in on the triangle.</p>
  </li>
  <li>
    <p>If <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image255.gif" /> <img width="10" src="https://lanl.github.io/LaGriT/assets/images/Image256.gif" />  = 0 and p is not on the triangle then p is outside.</p>
  </li>
</ul>

<p><img src="https://lanl.github.io/LaGriT/assets/images/Image257.gif" /></p>

<p>One implication of this definition is that the concept of shadows cast
by open sheets no longer is valid. Sheets may be considered to extend to
the boundary of the geometry.</p>

<p><img src="https://lanl.github.io/LaGriT/assets/images/Image259.gif" /></p>


            </div>
        </div>

        <!-- Begin footer -->
        <footer class="footer-distributed">
            <div class="footer-right">
              <div><img src="/assets/img/lanl_logo_white.png" height="80"></div>
            </div>

            <div class="footer-left lg-background-color">
                <p class="footer-links" style="font-family: 'Fira Sans', sans-serif; color: white;">
                    <a href="/">Home</a>
                    ·
                    <a href="/pylagrit/original/index.html">PyLaGriT</a>
                    ·
                    <a href="https://int.lanl.gov/org/ddste/aldcels/ees/index.shtml">EES-16</a>
                    ·
                    <a href="/pages/licensing.html">License</a>
                    ·
                    <a href="https://lagrit.lanl.gov/">Contact</a>
                </p>

                <p>&copy; 2019 Los Alamos National Laboratory</p>
                <p>EES-16 | Computational Earth Science</p>
                <p>LA-CC-15-069</p>
            </div>
        </footer>

        <!-- Begin Navigation Bar -->
        <div id="offcanvas" uk-offcanvas="mode: push; overlay: true" class="uk-offcanvas">
            <div class="uk-offcanvas-bar">
                <div class="uk-panel">
                    <ul class="uk-nav uk-nav-default tm-nav">
                        <form class="uk-search uk-search-default" action="https://lanl.github.io/LaGriT/search/">
                            <a href="" uk-search-icon></a>
                            <input class="uk-search-input" type="search" placeholder="" name="q" id="tipue_search_input_mobile">
                        </form>
                        <li class="uk-nav-header">General</li>
                        <li><a href="/">Home</a></li>
                        <li><a href="/pages/commands">Commands</a></li>
                        <li><a href="/pages/release">Release Notes</a></li>
                        <li><a href="/pages/publications">Publications</a></li>
                        <li><a href="http://github.com/lanl/LaGriT">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- End Navigation Bar -->

    </div>

</body>

</html>
